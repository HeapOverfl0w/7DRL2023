<html>
  <head>
    <title>FPS</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <canvas id="scene"></canvas>
    <div style="display: none">
      <audio id="spell">
        <source src="./sounds/spell.wav" type="audio/wav" />
      </audio>
      <audio id="fire">
        <source src="./sounds/fire.mp3" type="audio/mp3" />
      </audio>
      <audio id="gorgonScream">
        <source src="./sounds/gorgonScream.wav" type="audio/wav" />
      </audio>
      <audio id="gorgonDeath">
        <source src="./sounds/gorgonDeath.wav" type="audio/wav" />
      </audio>
      <audio id="demonAttack">
        <source src="./sounds/demonAttack.wav" type="audio/wav" />
      </audio>
      <audio id="demonDeath">
        <source src="./sounds/demonDeath.wav" type="audio/wav" />
      </audio>
      <audio id="punch1">
        <source src="./sounds/punch1.wav" type="audio/wav" />
      </audio>
      <audio id="punch2">
        <source src="./sounds/punch2.wav" type="audio/wav" />
      </audio>
      <audio id="punch3">
        <source src="./sounds/punch3.wav" type="audio/wav" />
      </audio>
    </div>
    <div style="display: none">
      <img src="./resources/death_cutscene.png" />
      <img src="./resources/default.png" />
      <img src="./resources/defaultHigh.png" />
      <img id="defaultskybox" src="./resources/defaultskybox.png" />
      <img id="hud" src="./resources/HUD.png" />
      <img src="./resources/test.png" />
      <img src="./resources/empty.png" />
      <img src="./resources/water.png" />
      <img src="./resources/statue.png" />
      <img src="./resources/shrub.png" />
      <img src="./resources/teleport.png" />
      <img id="menuBackground" src="./resources/backgroundMenu.png" />
      <img id="card" src="./resources/baseCard.png" />
      <img src="./resources/fists.png" />
      <img src="./resources/fistsAttack.png" />
      <img src="./resources/knuckles.png" />
      <img src="./resources/knucklesAttack.png" />
      <img src="./resources/fistsMagic.png"/>
      <img src="./resources/fistsMagicAttack.png"/>
      <img src="./resources/fistsMagicProjectile.png"/>
      <img id ="fistsCardMagic" src="./resources/fistsCardMagic.png"/>
      <img id="fistCard" src="./resources/fistscard.png" />
      <img id="knucklesCard" src="./resources/knucklescard.png" />
      <img src="./resources/punch.png" />
      <img src="./resources/harpy.png" />
      <img src="./resources/harpyAttack.png" />
      <img src="./resources/harpyDeath.png" />      
      <img src="./resources/ogre.png" />
      <img src="./resources/ogreAttack.png" />
      <img src="./resources/ogrePunch.png" />
      <img src="./resources/ogreDeath.png" />
      <img src="./resources/ogreProjectile.png" />
      <img src="./resources/totem.png" />
      <img src="./resources/totemAttack.png" />
      <img src="./resources/totemDeath.png" />
      <img src="./resources/healthPotion.png"/>
      <img src="./resources/manaPotion.png"/>
      <img src="./resources/spookyTree.png"/>
      <img src="./resources/tombstone.png"/>
      <img src="./resources/skullPile.png"/>
      <img src="./resources/gorgon.png" />
      <img src="./resources/gorgonDeath.png" />
      <img src="./resources/gorgonAttack.png" />
      <img src="./resources/gorgonFire.png" />
      <img src="./resources/demon.png"/>
      <img src="./resources/demonDeath.png"/>
      <img src="./resources/demonAttack.png"/>
      <img src="./resources/demonProjectile.png"/>
      <img src="./resources/grass_city.png" />
      <img src="./resources/grass2_city.png" />
      <img src="./resources/wall1_city.png" />
      <img src="./resources/wall2_city.png" />
      <img src="./resources/wall3_city.png" />

      <img src="./resources/wall1_cemetary.png"/>
      <img src="./resources/wall2_cemetary.png"/>
      <img src="./resources/wall3_cemetary.png"/>
      <img src="./resources/floor1_cemetary.png"/>
      <img src="./resources/floor2_cemetary.png"/>

      <img src="./resources/skybox_cemetary.png" id="skybox_cemetary" />
    </div>
  </body>
</html>
<script src="Constants.js"></script>
<script src="AudioHandler.js"></script>
<script src="Main.js"></script>
<script src="Camera.js"></script>
<script src="Level.js"></script>
<script src="LevelFactory.js"></script>
<script src="PostRenderFilter.js"></script>
<script src="RayCaster.js"></script>
<script src="Data.js"></script>
<script src="Animation.js"></script>
<script src="Billboard.js"></script>
<script src="Enemy.js"></script>
<script src="OgreBoss.js"></script>
<script src="Enemy2.js"></script>
<script src="Projectile.js"></script>
<script src="Weapon.js"></script>
<script src="Powerup.js"></script>
<script src="Teleport.js"></script>
<script src="Hazard.js"></script>
<script src="Boss.js"></script>
<script src="Cutscene.js"></script>
<script src="WeaponMenu.js"></script>
<script src="./Levels/TestLevel.js"></script>
<script>
  var cvs = document.getElementById('scene');
  var main;
  var pointerLocked = false;

  window.onload = function () {
    cvs.width = 720; //480;
    cvs.height = 405; //270;
    let aspectRatio = cvs.width / cvs.height;
    let width = window.innerWidth;
    if (window.innerWidth / aspectRatio > window.innerHeight) {
      width = window.innerHeight * aspectRatio;
    }
    cvs.style.width = width + 'px';
    cvs.style.height = width / aspectRatio + 'px';
    let ctx = cvs.getContext('2d');
    ctx.font = '10px MS Gothic';

    main = new Main(ctx);
    main.initialize();
  };

  window.onresize = function () {
    let aspectRatio = cvs.width / cvs.height;
    let width = window.innerWidth;
    if (window.innerWidth / aspectRatio > window.innerHeight) {
      width = window.innerHeight * aspectRatio;
    }
    cvs.style.width = width + 'px';
    cvs.style.height = width / aspectRatio + 'px';
  };

  document.addEventListener('keydown', function (event) {
    if (main != undefined) main.handleKeyDown(event.keyCode);
  });

  document.addEventListener('keyup', function (event) {
    if (main != undefined) main.handleKeyUp(event.keyCode);
  });

  document.addEventListener('mousemove', function (event) {
    if (main != undefined && pointerLocked)
      main.handleMouseMove(event.movementX);
  });

  document.addEventListener('mouseup', function (event) {
    if (main != undefined && !pointerLocked) cvs.requestPointerLock();

    if (main != undefined && pointerLocked) main.handleMouseUp();
  });

  document.addEventListener('mousedown', function (event) {
    if (main != undefined && pointerLocked) main.handleMouseDown();
  });

  document.addEventListener('pointerlockchange', function (event) {
    pointerLocked = !pointerLocked;
  });
</script>
